(function(global){
  class Vector3{
    constructor(x=0,y=0,z=0){this.x=x;this.y=y;this.z=z}
    set(x,y,z){this.x=x;this.y=y;this.z=z;return this}
    copy(v){this.x=v.x;this.y=v.y;this.z=v.z;return this}
    clone(){return new Vector3(this.x,this.y,this.z)}
    add(v){this.x+=v.x;this.y+=v.y;this.z+=v.z;return this}
    sub(v){this.x-=v.x;this.y-=v.y;this.z-=v.z;return this}
    multiplyScalar(s){this.x*=s;this.y*=s;this.z*=s;return this}
    length(){return Math.hypot(this.x,this.y,this.z)}
    normalize(){const l=this.length()||1;return this.multiplyScalar(1/l)}
  }
  class Color{constructor(hex){this.hex=hex}}
  class Scene{constructor(){this.objects=[];this.background=new Color(0)}add(o){this.objects.push(o)}remove(o){this.objects=this.objects.filter(v=>v!==o)}}
  class PerspectiveCamera{constructor(){this.position=new Vector3();this.zoom=1}}
  class Clock{constructor(){this.last=performance.now()}getDelta(){const n=performance.now();const d=(n-this.last)/1000;this.last=n;return Math.min(d,0.033)}}
  class WebGLRenderer{
    constructor(){this.domElement=document.createElement('canvas');this.ctx=this.domElement.getContext('2d')}
    setSize(w,h){this.domElement.width=w;this.domElement.height=h}
    render(scene,camera){
      const c=this.ctx,canvas=this.domElement;
      c.fillStyle='#050b14';c.fillRect(0,0,canvas.width,canvas.height);
      for(const o of scene.objects){if(o&&o.draw)o.draw(c,camera,canvas)}
    }
  }
  global.THREE={Vector3,Color,Scene,PerspectiveCamera,Clock,WebGLRenderer};
})(window);
